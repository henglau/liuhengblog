<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="author" content="刘恒">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
	<link rel="shortcut icon" href="/henglau.ico" />
	<link rel="stylesheet" type="text/css" href="/mincss/bootstrap.min.css">
	<title>抽奖后台</title>
	<style type="text/css">
		#container {
			text-align: center;
			position: absolute;
			width: 100%;
			top: 50%;
			margin-top: -90px;
		}
		button.btn {
			width: 300px;
			height: 80px;
			margin-bottom: 10px;
			background-color: #24ADD7;
			border-radius: 40px;
			font-size: 30px;
			font-weight: bold;
			color: #fff !important;
		}
		button.btn:focus,
		button.btn:active {
			outline: 0 !important;
		}
		#start.stop {
			background-color: #FC6666;
		}
	</style>
</head>
<body>
	<div id="container">
		<button id="start" class="btn">开始抽奖</button><br>
		<button id="clear" class="btn">清空中奖名单</button>
	</div>
	<script type="text/javascript" src="/choujiang/jquery-1.8.0.js"></script>
	<script type="text/javascript" src="/socket.io/socket.io.js"></script>
	<script type="text/javascript">
		(function(){
			//连接websocket后端服务器
			var socket = io.connect('ws://www.henglau.cn');

			socket.on('select', function(data){
				confirm(data.user + ', ' + data.phone) ? 
				socket.emit('qr', {action: 'qr'}) : 
				socket.emit('qx', {action: 'qx'});
			});

			$('#start').click(function(){
				var $this = $(this);
				if(!$this.hasClass('stop')){
					socket.emit('start', {action: 'start'});
					$this.text('停止抽奖').addClass('stop');
				}else{
					$this.text('开始抽奖').removeClass('stop');
					socket.emit('stop', {action: 'stop'});
				}
			});
		}());
	</script>
</body>
</html>